<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Forgot Password</title>
    <link rel="stylesheet" href="../css/style.css">
</head>
<body>
    <div class="auth-container">
        <div class="auth-card">
            <h1 class="auth-title">Forgot Password</h1>

            <div id="email-step">
                <div class="form-group">
                    <label class="form-label" for="email">Email Address</label>
                    <input type="email" id="email" class="form-control" placeholder="Enter your email">
                </div>
                <button class="btn btn-primary btn-block" onclick="sendCode()">Send Code</button>
            </div>

            <div id="code-step" style="display:none;">
                <p class="text-center mb-3">Enter the 6-digit code we sent to your email</p>
                <div class="flex gap-2 mb-3" id="code-inputs">
                    <input type="text" maxlength="1" class="form-control" style="text-align:center; width:50px;" oninput="moveNext(this)">
                    <input type="text" maxlength="1" class="form-control" style="text-align:center; width:50px;" oninput="moveNext(this)">
                    <input type="text" maxlength="1" class="form-control" style="text-align:center; width:50px;" oninput="moveNext(this)">
                    <input type="text" maxlength="1" class="form-control" style="text-align:center; width:50px;" oninput="moveNext(this)">
                    <input type="text" maxlength="1" class="form-control" style="text-align:center; width:50px;" oninput="moveNext(this)">
                    <input type="text" maxlength="1" class="form-control" style="text-align:center; width:50px;" oninput="moveNext(this)">
                </div>
                <button class="btn btn-primary btn-block" onclick="verifyCode()">Verify Code</button>
            </div>

            <div id="reset-step" style="display:none;">
                <div class="form-group">
                    <label class="form-label" for="new-password">New Password</label>
                    <input type="password" id="new-password" class="form-control" placeholder="Enter new password">
                </div>
                <div class="form-group">
                    <label class="form-label" for="confirm-password">Confirm Password</label>
                    <input type="password" id="confirm-password" class="form-control" placeholder="Confirm new password">
                </div>
                <button class="btn btn-primary btn-block" onclick="resetPassword()">Reset Password</button>
            </div>

            <p class="auth-link text-center mt-3">
                <a href="../index.html">Back to Login</a>
            </p>
        </div>
    </div>

    <script>
        let generatedCode = "";

        function sendCode() {
            const email = document.getElementById("email").value;
            if (!email) {
                alert("Please enter your email!");
                return;
            }

            generatedCode = Math.floor(100000 + Math.random() * 900000).toString();
            alert("Code sent to email: " + generatedCode);

            document.getElementById("email-step").style.display = "none";
            document.getElementById("code-step").style.display = "block";

            document.querySelector("#code-inputs input").focus();
        }

        function moveNext(input) {
            if (input.value.length === 1) {
                const next = input.nextElementSibling;
                if (next) next.focus();
            }
        }

        function verifyCode() {
            const codeInputs = document.querySelectorAll("#code-inputs input");
            let enteredCode = "";
            codeInputs.forEach(input => enteredCode += input.value);

            if (enteredCode === generatedCode) {
                alert("Code verified! You can reset your password now.");
                document.getElementById("code-step").style.display = "none";
                document.getElementById("reset-step").style.display = "block";
            } else {
                alert("Incorrect code, try again.");
            }
        }

        function resetPassword() {
            const newPass = document.getElementById("new-password").value;
            const confirmPass = document.getElementById("confirm-password").value;

            if (!newPass || !confirmPass) {
                alert("Please fill in both fields!");
                return;
            }

            if (newPass !== confirmPass) {
                alert("Passwords do not match!");
                return;
            }

            alert("Password reset successfully!");
            window.location.href = "../index.html";
        }
    </script>
</body>
</html>